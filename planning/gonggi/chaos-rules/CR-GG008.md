# 화면 뒤집기

| 항목 | 값 |
|---|---|
| **ID** | CR-GG008 |
| **게임** | gonggi |
| **상태** | draft |
| **생성일** | 2026-03-01 |
| **수정일** | 2026-03-01 |

---

## 요약

> 단계 전환 시 게임 화면이 180도 뒤집혀서 조작이 반대가 된다.

## 발동 조건

| 항목 | 값 |
|---|---|
| **최소 라운드** | 4 |
| **발동 타이밍** | 단계 전환 시 (stage-transition) |
| **발동 확률** | 0.15 (라운드별 가중 적용) |
| **중복 발동** | 불가 (같은 라운드에서 1회만) |

## 연출

### 시각 효과
1. 단계 성공 후 다음 단계 진입
2. **"다음 단계..."** 텍스트 표시
3. 게임 보드 전체가 **서서히 180도 회전** (CSS `rotate(180deg)`, 1초)
4. 회전 완료 후 뒤집힌 상태로 게임 진행
5. 위로 플릭 → 아래로 가고, 왼쪽 스와이프 → 오른쪽으로
6. 해당 단계가 끝나면 다시 원래대로 복귀

### 사운드 (향후)
- "윙~" 회전 소리
- "뚝" 뒤집힘 완료 소리

### 타이밍
| 단계 | 시간 | 설명 |
|---|---|---|
| 예고 | 500ms | "다음 단계..." 텍스트 (불안감 조성) |
| 회전 | 1000ms | 보드가 180도 회전 |
| 적응 | 0ms | 바로 게임 시작 (적응 시간 없음) |
| 복귀 | 단계 끝 | 다음 단계 전환 시 원래대로 |

## 게임 영향

- **돌 상태 변화**: 없음 (위치 그대로, 화면만 뒤집힘)
- **단계 영향**: 해당 단계 동안 화면 뒤집힘 유지, 단계 자체는 실패 아님
- **점수 영향**: 없음
- **후속 효과**: 다음 단계에서 원래대로 복귀 (또는 운 나쁘면 연속 발동 가능)

## 구현 가이드

### 데이터 구조
```typescript
{
  id: 'CR-GG008',
  name: '화면 뒤집기',
  trigger: 'stage-transition',
  minRound: 4,
  probability: 0.15,
  execute: (state: GonggiState) => ({
    type: 'ui-transform',
    animation: 'screen-flip',
    message: '다음 단계...',
    transform: 'rotate(180deg)',
    duration: 'until-stage-end',
  }),
}
```

### 필요한 애니메이션
- 보드 회전: CSS `transition: transform 1s ease-in-out` → `rotate(180deg)`
- 복귀: 동일 transition → `rotate(0deg)`

### 조작 반전 처리
```typescript
// 화면이 뒤집힌 상태에서의 포인터 좌표 변환
function invertPointer(x: number, y: number, boardRect: DOMRect) {
  return {
    x: boardRect.width - (x - boardRect.left) + boardRect.left,
    y: boardRect.height - (y - boardRect.top) + boardRect.top,
  }
}
```
- 또는 CSS `rotate(180deg)`만 적용하고 포인터 이벤트는 그대로 두면 자동으로 조작 반전됨
- 더 간단한 방법: 보드 컨테이너에 `transform: rotate(180deg)` 적용 → 내부 터치 좌표가 자동 반전

### 참고 패턴
- CSS transform만으로 구현 가능 — 가장 구현이 간단한 변칙 룰

## 열받음 지수

| 항목 | 값 |
|---|---|
| **열받음 정도** | ★★★★★ |
| **웃김 정도** | ★★★☆☆ |
| **예측 가능성** | 중간 (회전이 보이므로 예측 가능하지만 적응 불가) |

## 메모

- 구현 난이도가 가장 낮음 (CSS 한 줄) — 하지만 열받음은 최상급
- 뒤집힌 상태에서 플릭/스와이프 방향이 반대라 근육 기억이 방해됨
- 적응하려면 2~3번 시도해야 하므로 시간이 크게 늘어남
- 라운드 5+에서 CR-GG004(가짜 클리어)와 연속 발동하면 멘탈 붕괴
- 90도 회전 변형도 고려 가능 (후속 개선)
