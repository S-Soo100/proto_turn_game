# 고양이 습격

| 항목 | 값 |
|---|---|
| **ID** | CR-GG002 |
| **게임** | gonggi |
| **상태** | draft |
| **생성일** | 2026-03-01 |
| **수정일** | 2026-03-01 |

---

## 요약

> 성공 직전 단계까지 갔는데 갑자기 고양이 손이 화면 옆에서 튀어나와 공깃돌을 모두 쳐서 날려버린다.

## 발동 조건

| 항목 | 값 |
|---|---|
| **최소 라운드** | 3 |
| **발동 타이밍** | 성공 직전 (4단 또는 5단의 마지막 동작 성공 판정 직전) |
| **발동 확률** | 0.35 (라운드별 가중 적용) |
| **중복 발동** | 불가 (같은 라운드에서 1회만) |

## 연출

### 시각 효과
1. 플레이어가 마지막 동작을 성공적으로 수행
2. "성공!" 텍스트가 잠깐 보이려는 찰나...
3. 화면 옆에서 **고양이 손(🐾)** 이 쑥 나타남 (0.2초)
4. 고양이 손이 **휙!** 하고 바닥의 돌들을 모조리 쳐서 사방으로 날림
5. 돌들이 matter.js 물리로 사방팔방 튕겨 나감
6. 고양이 손이 쏙 들어감
7. "야옹~" 텍스트 표시
8. 돌 리셋, 단계 재시작

### 사운드 (향후)
- "슉!" 고양이 손 등장
- "탁탁탁!" 돌 쳐내는 소리
- "야옹~" 고양이 울음

### 타이밍
| 단계 | 시간 | 설명 |
|---|---|---|
| 예고 | 200ms | "성공!" 텍스트 깜빡 (페이크) |
| 고양이 등장 | 200ms | 손이 화면 밖에서 슬라이드인 |
| 타격 | 300ms | 돌 전부 쳐내기 |
| 돌 산란 | 600ms | matter.js로 돌이 사방으로 튕김 |
| 고양이 퇴장 | 300ms | 손이 슬라이드아웃 |
| 결과 | 1000ms | "야옹~" 텍스트 + 게임 복귀 |

## 게임 영향

- **돌 상태 변화**: 모든 돌이 바닥에 **랜덤 산란** (matter.js 충격 적용)
- **단계 영향**: 현재 단계 **실패 처리**, 해당 단계 처음부터 재시작
- **점수 영향**: 없음 (실패 횟수에만 반영)
- **후속 효과**: 없음

## 구현 가이드

### 데이터 구조
```typescript
{
  id: 'CR-GG002',
  name: '고양이 습격',
  trigger: 'before-success',
  minRound: 3,
  probability: 0.35,
  execute: (state: GonggiState) => ({
    type: 'all-stones-scattered',
    animation: 'cat-swipe',
    message: '야옹~',
    physicsImpulse: { x: randomRange(-10, 10), y: randomRange(-5, -15) },
  }),
}
```

### 필요한 애니메이션
- 고양이 손 슬라이드: Framer Motion `animate` (x: 화면 밖 → 안 → 밖)
- 돌 산란: matter.js `Body.applyForce()` — 충격량으로 사방 튕김
- "성공!" 페이크 텍스트: Framer Motion opacity 깜빡 → 사라짐
- 고양이 손 mock-up: 🐾 이모지 또는 간단한 CSS 실루엣

### 참고 패턴
- `TargetCircle.tsx`의 decoy 피드백 (wiggle 애니메이션)
- matter.js 돌 산란은 기본 게임의 `scatterStones`와 동일 로직 재활용

## 열받음 지수

| 항목 | 값 |
|---|---|
| **열받음 정도** | ★★★★★ |
| **웃김 정도** | ★★★★☆ |
| **예측 가능성** | 낮음 (성공 직전이라 더 열받음) |

## 메모

- "성공!" 이 보이려다가 사라지는 게 핵심 — **희망 고문** 패턴
- 고양이 손이 나오는 방향을 랜덤으로 (왼쪽/오른쪽/위) 하면 더 예측 불가
- 5단(꺾기) 성공 직전에 발동하면 최고 열받음 포인트
- 에셋은 mock-up에서 🐾 + CSS 고양이 팔 실루엣으로 시작
