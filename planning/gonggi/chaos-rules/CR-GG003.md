# 돌멩이의 자아

| 항목 | 값 |
|---|---|
| **ID** | CR-GG003 |
| **게임** | gonggi |
| **상태** | draft |
| **생성일** | 2026-03-01 |
| **수정일** | 2026-03-01 |

---

## 요약

> 스와이프로 돌을 집으려는 순간, 돌들에 눈알이 생기더니 슬금슬금 도망간다.

## 발동 조건

| 항목 | 값 |
|---|---|
| **최소 라운드** | 3 |
| **발동 타이밍** | 돌을 집으려는 순간 (before-pick) |
| **발동 확률** | 0.30 (라운드별 가중 적용) |
| **중복 발동** | 가능 (같은 라운드에서 여러 번 도망 가능) |

## 연출

### 시각 효과
1. 플레이어가 돌에 손가락/마우스를 가까이 가져감
2. 바닥의 돌들에 갑자기 **눈알(👀)** 이 팝업으로 생김 (Framer Motion scale 0→1)
3. 돌들이 **"!"** 말풍선을 띄움
4. 돌들이 손가락/마우스 **반대 방향**으로 슬금슬금 도망 (matter.js force)
5. 도망 속도는 느림 — 쫓아가면 잡을 수 있음
6. 제한시간은 계속 흐름

### 사운드 (향후)
- "또각또각" 작은 발소리 (돌이 도망가는 소리)
- "삐약?" 놀라는 소리

### 타이밍
| 단계 | 시간 | 설명 |
|---|---|---|
| 예고 | 0ms | 없음 (터치 접근 시 즉시 반응) |
| 눈알 생성 | 200ms | 돌에 👀 팝업 |
| 놀람 | 300ms | "!" 말풍선 |
| 도망 | 지속 | 손가락 반대 방향으로 계속 이동 (잡을 때까지) |

## 게임 영향

- **돌 상태 변화**: 돌 위치가 실시간으로 이동 (matter.js Body에 force 적용)
- **단계 영향**: 실패 아님! 쫓아가서 제한시간 내에 집으면 성공
- **점수 영향**: 없음 (시간만 소모)
- **후속 효과**: 돌을 잡으면 눈알이 사라지고 정상 돌로 복귀

## 구현 가이드

### 데이터 구조
```typescript
{
  id: 'CR-GG003',
  name: '돌멩이의 자아',
  trigger: 'before-pick',
  minRound: 3,
  probability: 0.30,
  execute: (state: GonggiState) => ({
    type: 'stones-flee',
    animation: 'stone-eyes-flee',
    message: '...!',
    fleeForce: 0.002, // matter.js force magnitude
    fleeDirection: 'away-from-pointer',
  }),
}
```

### 필요한 애니메이션
- 눈알 팝업: Framer Motion `scale: [0, 1.2, 1]` + 위치는 돌 중앙 상단
- "!" 말풍선: Framer Motion `y: [10, 0]` + `opacity: [0, 1]`
- 도망: matter.js `Body.applyForce()` — 포인터 위치 반대 방향 벡터
- 눈알 mock-up: 👀 이모지 (돌 위에 오버레이)

### 참고 패턴
- `TargetCircle.tsx`의 포인터 추적 패턴
- matter.js 돌 산란의 force 적용 로직

## 열받음 지수

| 항목 | 값 |
|---|---|
| **열받음 정도** | ★★★☆☆ |
| **웃김 정도** | ★★★★★ |
| **예측 가능성** | 낮음 (갑자기 눈이 생김) |

## 메모

- 다른 변칙 룰과 달리 **실패가 아닌 방해**  — 시간만 잡아먹어서 리더보드에 불리
- 도망 속도를 느리게 해야 "잡을 수 있긴 한데 짜증나는" 밸런스
- 돌에 눈알이 달린 비주얼이 귀여워서 짜증 + 웃김 동시 유발
- 도망치다가 돌끼리 부딪혀서 다시 모이는 상황도 발생 가능 (matter.js 충돌)
