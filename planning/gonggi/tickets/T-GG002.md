# 공기놀이 보드 컴포넌트 + 애니메이션

| 항목 | 값 |
|---|---|
| **ID** | T-GG002 |
| **에픽** | E-GG001 |
| **게임** | gonggi |
| **상태** | draft |
| **우선순위** | high |
| **담당** | claude |
| **생성일** | 2026-03-01 |
| **수정일** | 2026-03-01 |
| **브랜치** | feature/T-GG002-board-component |
| **의존** | T-GG001 |
| **차단** | T-GG003 |

---

## 요약

> 공기놀이 보드 컴포넌트를 구현한다. 공깃돌 렌더링, 던지기/잡기 애니메이션, 사용자 인터랙션(터치/클릭)을 포함한다.

## 상세 설명

### 컴포넌트 구조
- `GonggiBoard` — 메인 보드 (2.5D 바닥면 + 상태바)
- 공깃돌 5개 렌더링 (mock-up 원형 + 그라데이션/그림자 입체감)
- matter.js 물리 엔진 연동 (돌 산란, 충돌, 포물선, 바운스)
- 2.5D 바닥면: `perspective(800px) rotateX(45deg)`
- 사용자 인터랙션: 스와이프-투-캐치 + 플릭-투-토스

### 인터랙션 디자인 (확정)
- **타이밍 기반**: 각 동작에 제한시간, 단계별 난이도 상승
- **스와이프-투-캐치**: long-press로 바닥 돌을 한 획에 연결하여 집기 (`pointerdown` → `pointermove` → `pointerup`)
- **플릭-투-토스**: 돌을 눌러서 위로 플릭하여 던지기 (스쿼시 → 스트레치 → 포물선)
- 상세 스펙: `planning/gonggi/overview.md` 참조

## 구현 가이드

### 수정할 파일
| 파일 | 변경 내용 |
|---|---|
| `src/lib/physics/gonggi-physics.ts` | **신규** — matter.js 물리 엔진 래퍼 |
| `src/components/game/GonggiBoard.tsx` | **신규** — 2.5D 보드 컴포넌트 |
| `src/components/game/GonggiBoard.test.tsx` | **신규** — Integration 테스트 |

### 의존성 추가
```bash
pnpm add matter-js
pnpm add -D @types/matter-js
```

### 참고 패턴
- `ReactionSpeedBoard.tsx`의 타이밍 기반 인터랙션 + `requestAnimationFrame` 게임 루프
- `TargetCircle.tsx`의 CSS 애니메이션 패턴
- `GomokuBoard.tsx`의 상태바 + 보드 레이아웃

## 수락 기준

- [ ] 공깃돌 5개가 바닥에 렌더링됨
- [ ] 던지기/잡기 애니메이션이 자연스러움
- [ ] 단계별 진행 상태가 상태바에 표시됨
- [ ] 모바일 터치에 최적화됨
- [ ] Integration 테스트 작성 (최소 10개)
- [ ] `pnpm build` 성공

## 관련 유즈케이스

| ID | 제목 |
|---|---|
| UC-GG001 | 솔로 공기놀이 플레이 |

## 메모

- matter.js는 물리 계산만 담당, 렌더링은 React DOM으로 처리 (Canvas 미사용)
- `requestAnimationFrame` 루프에서 matter.js Engine.update() → Body 위치 읽기 → React state 반영
- 2.5D perspective 적용 시 터치 좌표 → 물리 좌표 변환 매핑 필요
- mock-up 돌: `radial-gradient` + `box-shadow`로 입체감, 나중에 이미지로 교체 가능
