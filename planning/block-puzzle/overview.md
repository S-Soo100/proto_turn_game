# 블록 퍼즐 (Block Puzzle) Overview

| 항목 | 값 |
|---|---|
| **ID** | block-puzzle |
| **상태** | research |

---

## 게임 개요

격자에 블록 조각을 드래그하여 배치하고, 가로/세로 줄을 완성하면 제거되는 캐주얼 퍼즐 게임. 2025년 전 세계 다운로드 1위(Block Blast, 3.56억 DL) 장르.

## 핵심 메카닉

- 매 턴 3개의 블록 조각이 제공됨
- 격자에 드래그 앤 드롭으로 배치
- 가로 또는 세로 줄이 완성되면 자동 제거 + 점수 획득
- 3개 블록 중 어느 것도 배치할 수 없으면 게임 오버
- 시간 제한 없음 — 턴 기반 전략 플레이

## 보드 구조

| 항목 | 값 |
|---|---|
| 격자 크기 | 8x8 (Block Blast 기준) 또는 10x10 (1010! 기준) |
| 셀 표현 | `filled` / `empty` (+ 색상) |
| 데이터 구조 | 2D 배열 또는 flat 배열 |
| 블록 조각 | 테트로미노 + 변형 셰이프 (다양한 크기/모양) |

## 승리 조건

- 명확한 승리 조건 없음 (무한 진행형)
- 하이스코어 경쟁 방식
- 게임 오버: 주어진 3개 블록 중 배치 가능한 것이 없을 때

## AI 전략

- 솔로 퍼즐 게임이므로 AI 대전 불필요
- 추후 힌트 시스템으로 최적 배치 위치 제안 가능

## 기술 구성 (예정)

| 파일 | 역할 |
|---|---|
| `src/lib/game-logic/block-puzzle.ts` | 격자 관리, 배치 판정, 줄 완성/제거, 점수 계산, 게임 오버 판정, 블록 생성기 |
| `src/components/game/BlockPuzzleBoard.tsx` | NxN 격자, 드래그 앤 드롭, 배치 미리보기, 줄 제거 애니메이션, 블록 트레이 |

### 핵심 구현 모듈
1. **격자 상태 관리** — NxN 2D 배열, 채워진/빈 칸 추적
2. **블록 조각 정의** — 테트로미노 + 변형 셰이프 (모양/색상)
3. **배치 가능 판정** — 격자 범위 + 빈칸 확인
4. **줄 완성 판정** — 가로/세로 풀 라인 스캔
5. **줄 제거 + 점수 계산** — 콤보 보너스 (동시 여러 줄)
6. **게임 오버 판정** — 3개 블록 모두 배치 불가
7. **블록 조각 랜덤 생성기**

## PvP 지원

| 항목 | 값 |
|---|---|
| 지원 여부 | no (솔로 퍼즐) |
| 추후 확장 | 점수 경쟁 모드 가능 |

## 리서치 자료

| 파일 | 내용 |
|---|---|
| `planning/block-puzzle/research/block-puzzle-type-analysis.md` | 블록 퍼즐 4가지 타입 분석 + 구현 전략 |
| `planning/block-puzzle/research/puzzle-game-trend-2025-2026.md` | 2025-2026 퍼즐 게임 시장 트렌드 |

### 구현 전략 (리서치 결론)
- **Phase 1**: 타입 B (Block Blast류) — 8x8 드래그 배치 + 줄 완성/제거 + 점수
- **Phase 2**: 타입 C (Woodoku) 모드 추가 — 9x9 + 3x3 서브그리드
- **Phase 3**: 부가 기능 — 일일 도전, Supabase 하이스코어/랭킹

## 에픽 목록

| ID | 제목 | 상태 |
|---|---|---|
| E-BP001 | 블록 퍼즐 MVP | draft |
