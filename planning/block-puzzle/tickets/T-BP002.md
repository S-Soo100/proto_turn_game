# 블록 퍼즐 보드 컴포넌트 + 드래그 앤 드롭

| 항목 | 값 |
|---|---|
| **ID** | T-BP002 |
| **에픽** | E-BP001 |
| **게임** | block-puzzle |
| **상태** | draft |
| **우선순위** | high |
| **담당** | claude |
| **생성일** | 2026-02-27 |
| **수정일** | 2026-02-27 |
| **브랜치** | feature/T-BP002-block-puzzle-board |
| **의존** | T-BP001 |
| **차단** | T-BP003 |

---

## 요약

블록 퍼즐 보드 UI 컴포넌트를 구현한다. 8x8 격자 렌더링, 블록 조각 트레이, 드래그 앤 드롭(터치 + 마우스), 배치 미리보기, 줄 제거 애니메이션을 포함.

## 상세 설명

### 보드 영역
- 8x8 격자를 Emotion styled-components로 렌더링
- 빈 칸은 연한 회색, 채워진 칸은 블록 색상 표시
- 줄 제거 시 Framer Motion으로 페이드아웃 애니메이션

### 블록 트레이
- 보드 하단에 3개 블록 조각 표시
- 사용한 블록은 사라지고, 3개 모두 사용하면 새 3개 생성

### 드래그 앤 드롭
- 모바일 터치 우선 (touchstart/touchmove/touchend)
- 마우스 드래그도 지원 (mousedown/mousemove/mouseup)
- 드래그 중 격자 위에서 배치 가능 위치 하이라이트 (반투명 프리뷰)
- 배치 불가 위치에서는 빨간색 표시

### 상태 표시
- 현재 점수 + 하이스코어
- 줄 제거 시 콤보 텍스트 ("Combo x2!" 등)

## 구현 가이드

### 수정할 파일
| 파일 | 변경 내용 |
|---|---|
| `src/components/game/BlockPuzzleBoard.tsx` | **신규** — 보드 + 트레이 + 드래그 앤 드롭 |

### 참고 패턴
- `GomokuBoard.tsx`의 격자 렌더링 구조 참고 (Emotion styled Grid)
- 터치 이벤트: `getBoundingClientRect()` + `elementFromPoint()`로 드롭 위치 계산
- 애니메이션: Framer Motion의 `AnimatePresence` + `motion.div`

## 수락 기준

- [ ] 8x8 격자가 정상 렌더링됨
- [ ] 블록 트레이에 3개 블록이 표시됨
- [ ] 터치 드래그로 블록을 격자에 배치 가능
- [ ] 마우스 드래그로 블록을 격자에 배치 가능
- [ ] 드래그 중 배치 미리보기 표시
- [ ] 줄 완성 시 제거 애니메이션 동작
- [ ] 점수가 실시간으로 표시됨
- [ ] `pnpm build` 성공

## 관련 유즈케이스

| ID | 제목 |
|---|---|
| UC-BP001 | 블록 배치 + 줄 제거 기본 플로우 |

## 메모

- 모바일 터치에서 드래그 시 스크롤 방지 필요 (`touch-action: none` 또는 `preventDefault`)
- 블록 크기는 격자 셀 크기와 동일하게 맞춤
- 접근성: 색맹 대응으로 색상 외에 패턴/테두리도 고려 (MVP 이후)
