# 블록 퍼즐 페이지 통합 + 홈 카드 추가

| 항목 | 값 |
|---|---|
| **ID** | T-BP003 |
| **에픽** | E-BP001 |
| **게임** | block-puzzle |
| **상태** | draft |
| **우선순위** | high |
| **담당** | claude |
| **생성일** | 2026-02-27 |
| **수정일** | 2026-02-27 |
| **브랜치** | feature/T-BP003-block-puzzle-integration |
| **의존** | T-BP002 |
| **차단** | — |

---

## 요약

블록 퍼즐을 기존 앱에 통합한다. HomePage에 게임 카드 추가, GamePage에서 블록 퍼즐 보드 조건부 렌더링, gameStore에 블록 퍼즐 지원 추가.

## 상세 설명

### HomePage
- `ACTIVE_GAMES` 배열에 블록 퍼즐 카드 추가
- 블록 퍼즐은 솔로 전용 → "AI 대전"이 아닌 "플레이" 버튼
- 난이도 선택 없음 (무한 진행형)

### GamePage
- `game.game_type_id === 'block-puzzle'` 조건 시 `<BlockPuzzleBoard>` 렌더링
- 결과 바텀시트: 점수 + 하이스코어 표시 + 재시작 버튼

### gameStore
- `GameTypeId`에 `'block-puzzle'` 추가
- `startBlockPuzzle(playerId)` 메서드 추가 (AI 대전과 다른 플로우)
- `parseBoardState`에 블록 퍼즐 격자 파싱 추가

### DB (선택)
- `game_types`에 `block-puzzle` 행 추가 — 하이스코어를 DB에 저장하려면 필요

## 구현 가이드

### 수정할 파일
| 파일 | 변경 내용 |
|---|---|
| `src/pages/HomePage.tsx` | ACTIVE_GAMES에 블록 퍼즐 카드 추가, 바텀시트 분기 |
| `src/pages/GamePage.tsx` | BlockPuzzleBoard 조건부 렌더링 + 결과 시트 |
| `src/store/gameStore.ts` | GameTypeId 확장, startBlockPuzzle 메서드 |
| `src/App.tsx` | 라우트 변경 필요 시 (기존 /game/:gameId 재사용 가능) |

### DB 변경
```sql
-- Supabase SQL Editor에서 실행 (하이스코어 저장 시)
INSERT INTO game_types (id, name, description)
VALUES ('block-puzzle', 'Block Puzzle', '8x8 grid block placement puzzle');
```

### 참고 패턴
- 오목 추가 시 사용한 패턴 참고: `ACTIVE_GAMES` 배열, `game_type_id` 조건 분기
- 솔로 게임은 PvP 로비 불필요 — 바로 게임 시작 플로우

## 수락 기준

- [ ] 홈 화면에 블록 퍼즐 카드가 표시됨
- [ ] 카드 클릭 시 블록 퍼즐 게임 시작
- [ ] GamePage에서 블록 퍼즐 보드 정상 렌더링
- [ ] 게임 오버 시 결과 화면 + 재시작 가능
- [ ] 기존 틱택토/오목 게임에 영향 없음
- [ ] `pnpm build` 성공

## 관련 유즈케이스

| ID | 제목 |
|---|---|
| UC-BP001 | 블록 배치 + 줄 제거 기본 플로우 |
| UC-BP002 | 게임 오버 + 재시작 |

## 메모

- 블록 퍼즐은 솔로 전용이므로 로비/PvP 관련 코드는 건드리지 않음
- 하이스코어를 로컬(localStorage)에 먼저 저장하고, 추후 에픽에서 Supabase로 이전
