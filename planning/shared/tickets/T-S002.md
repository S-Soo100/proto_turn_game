# 게임 종료 시 레이팅 자동 업데이트 연동

| 항목 | 값 |
|---|---|
| **ID** | T-S002 |
| **에픽** | E-S001 |
| **게임** | shared |
| **상태** | draft |
| **우선순위** | medium |
| **담당** | claude |
| **생성일** | 2026-02-27 |
| **수정일** | 2026-02-27 |
| **브랜치** | feature/T-S002-elo-rating-integration |
| **의존** | T-S001 |
| **차단** | — |

---

## 요약

PvP 게임 종료 시 T-S001에서 만든 ELO 계산 함수를 호출하여 양쪽 플레이어의 레이팅을 자동 업데이트한다.

## 상세 설명

- `gameStore.ts`의 게임 종료 로직에서 PvP 게임인 경우 ELO 계산 + profiles 업데이트 추가
- 게임 결과 화면에 레이팅 변동량 표시 (예: "+12" / "-8")
- AI 대전은 레이팅에 영향 없음

## 구현 가이드

### 수정할 파일
| 파일 | 변경 내용 |
|---|---|
| `src/store/gameStore.ts` | makeMove 종료 로직에 ELO 업데이트 추가 |
| `src/pages/GamePage.tsx` | 결과 바텀시트에 레이팅 변동량 표시 |

### 참고 패턴
- 기존 `makeMove` 함수에서 `status: 'completed'` 업데이트하는 부분 직후에 ELO 로직 추가
- `supabase.from('profiles').update({ elo_rating: newRating }).eq('id', playerId)`

## 수락 기준

- [ ] PvP 게임 종료 시 양쪽 레이팅이 정확히 업데이트됨
- [ ] AI 대전에서는 레이팅 변동 없음
- [ ] 결과 화면에 레이팅 변동량이 표시됨
- [ ] `pnpm build` 성공

## 관련 유즈케이스

| ID | 제목 |
|---|---|
| — | (에픽 레벨에서 정의) |

## 메모

- 레이팅 업데이트는 게임 상태 업데이트와 별도 쿼리 — 실패 시 게임 결과에는 영향 없도록 처리
