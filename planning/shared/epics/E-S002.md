# Supabase Realtime 정식 활성화

| 항목 | 값 |
|---|---|
| **ID** | E-S002 |
| **게임** | shared |
| **상태** | draft |
| **우선순위** | high |
| **작성자** | Claude |
| **생성일** | 2026-02-27 |
| **수정일** | 2026-02-27 |

---

## 목표

현재 폴링 폴백으로 우회 중인 실시간 동기화를 Supabase Realtime(postgres_changes)으로 정식 전환하여, 지연 시간을 줄이고 서버 부하를 낮춘다.

## 배경

Supabase Realtime이 `games` 테이블에서 작동하지 않아 로비 목록(2초), 게임 상태(1.5초), 방장 대기(1.5초) 모두 폴링으로 우회 중이다. Replica Identity 설정과 Dashboard Realtime 탭 활성화가 필요하다.

## 범위

### 포함
- `ALTER TABLE games REPLICA IDENTITY FULL;` 실행
- Dashboard Realtime 탭에서 games 테이블 활성화
- 폴링 폴백 코드 제거 또는 비활성화
- Realtime 정상 작동 검증

### 제외
- 다른 테이블(profiles, moves)의 Realtime 활성화

## 티켓 목록

| ID | 제목 | 상태 | 담당 | 의존성 |
|---|---|---|---|---|
| T-S003 | Realtime 활성화 + 폴링 폴백 제거 | draft | human + claude | — |

## 기술 고려사항

- DB 변경 필요: `ALTER TABLE games REPLICA IDENTITY FULL;` (SQL Editor 실행)
- Dashboard 설정 필요: Realtime 탭에서 games 테이블 활성화 (사용자 수동)
- 영향 받는 코드: `gameStore.ts` (subscribeToGame), `LobbyPage.tsx` (로비 폴링)
- 폴링 제거 후 Realtime 실패 시 폴백 없음 — 충분히 테스트 필요

## 완료 기준

- [ ] 모든 티켓이 done 상태
- [ ] PvP 게임에서 수를 두면 상대 화면에 1초 이내 반영
- [ ] 로비 목록이 실시간으로 갱신됨
- [ ] `.claude/rules/` 문서 최신화 완료
