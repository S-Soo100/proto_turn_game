# 결과 저장 + 랭킹 갱신

| 항목 | 값 |
|---|---|
| **ID** | UC-RSG002 |
| **티켓** | T-RSG004, T-RSG005 |
| **게임** | reaction-speed-game |
| **액터** | player, system |
| **상태** | draft |
| **생성일** | 2026-02-28 |
| **수정일** | 2026-02-28 |

---

## 사전 조건

- 120초 게임이 종료된 상태
- 결과 화면이 표시된 상태
- 플레이어가 로그인 상태

## 기본 시나리오 (Happy Path)

1. 게임 종료 후 결과 화면에 상세 통계가 표시된다 (총점, 클릭수, 미스수, 적중률, 최대콤보, 등급별 개수)
2. 플레이어가 "확인" 버튼을 누른다
3. 시스템이 leaderboard 테이블에 결과를 저장한다 (score, accuracy, max_combo)
4. 시스템이 현재 Top 10을 조회하여 플레이어의 순위를 확인한다
5. Top 10 진입 시 축하 메시지를 표시한다
6. 게임 선택 화면으로 복귀하며, 갱신된 랭킹이 표시된다

## 대안 시나리오

### A1: "다시 하기" 선택
- 조건: 플레이어가 "확인" 대신 "다시 하기"를 누름
- 흐름:
  1. 결과를 leaderboard에 저장
  2. 즉시 새 게임 시작 (게임 선택 화면 거치지 않음)

### A2: 개인 최고 기록 갱신
- 조건: 이번 점수가 플레이어의 이전 최고 점수보다 높음
- 흐름:
  1. 결과 화면에 "새 최고 기록!" 표시
  2. 저장 + 랭킹 갱신

## 예외 시나리오

### E1: 네트워크 오류
- 조건: leaderboard 저장 시 네트워크 오류 발생
- 시스템 반응: "저장에 실패했습니다. 다시 시도하시겠습니까?" 알림 + 재시도 버튼

### E2: 점수 0점
- 조건: 120초 동안 단 한 번도 클릭하지 않음
- 시스템 반응: 결과 화면은 표시하되, 0점도 정상 저장 (기록은 기록)

## 검증 방법

- [ ] 게임 종료 → 결과 화면 → "확인" → leaderboard에 기록 저장 확인
- [ ] 저장 후 게임 선택 화면의 Top 10이 갱신되었는지 확인
- [ ] "다시 하기" → 결과 저장 + 즉시 새 게임 시작 확인
- [ ] 개인 최고 기록 갱신 시 특별 표시 확인
