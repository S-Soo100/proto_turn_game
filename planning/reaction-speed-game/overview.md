# 반응속도 게임 (Reaction Speed Game) Overview

| 항목 | 값 |
|---|---|
| **ID** | reaction-speed-game |
| **상태** | research |

---

## 게임 개요

> 120초 동안 화면에 나타나는 타겟 서클(축소 원)을 정확한 타이밍에 클릭하여 최대 점수를 모으는 솔로 반응속도 게임. 싱글플레이 전용이며 Supabase leaderboard로 Top 10 랭킹 경쟁.

## 핵심 메카닉

### 타겟 서클 (Target Circle)
- 화면 무작위 위치에 등장, **osu! 스타일 축소 원** — 바깥 큰 원이 안쪽 작은 원으로 줄어들며, 겹치는 순간이 Perfect 타이밍
- **Normal**: 등장 후 **4초** 뒤 소멸
- **Speed**: 등장 후 **2초** 뒤 소멸
- 동시에 여러 개 등장 가능 (하나가 사라지기 전에 다른 타겟이 나타남)

### 등장 규칙 (공정성 보장)
- 120초 동안 총 **100개** 등장
- 비율: **Normal 70개 / Speed 30개**
- 등장 위치, 동시 등장 개수는 매 게임 랜덤이지만, 총 등장 수와 종류별 개수는 고정
- 등장 순서/타이밍은 **시드 기반 스케줄**로 사전 생성 (공정성)

### 점수 체계
- **시간 비례 연속 점수**: 소멸 직전 클릭 = 최고점 (100), 등장 직후 클릭 = 최저점 (10)
  - Normal 클릭: 10~100점 (소멸까지 남은 시간에 반비례)
  - Speed 클릭: 15~150점 (더 어려우므로 1.5배)
- **콤보 시스템**: 연속 클릭 성공 시 배율 증가
  - 5연속 = x2, 10연속 = x3, 20연속 = x4, 30연속 = x5 (최대)
  - 미스(소멸) 시 **콤보 초기화**
- **등급 판정**: Perfect (소멸 전 0.3초 이내), Great (0.3~1초), Good (1~2초), OK (2초 이상)

### 게임 흐름
1. 홈 → 반응속도 게임 카드 클릭 → 게임 선택 화면 (Top 10 랭킹 표시)
2. "시작" 버튼 → 120초 카운트다운 시작 + 타겟 서클 등장
3. 120초 종료 → 결과 화면 (상세 통계)
4. "확인" → Supabase leaderboard에 기록 저장 + 랭킹 갱신

## 화면 구조

### 게임 레이아웃
```
┌────────────────────────┐
│     ⏱ 01:45            │  ← 타이머 (상단 HUD)
├────────────────────────┤
│                        │
│     ○      ●           │
│           ○           │  ← 게임 영역 (타겟 서클 등장)
│  ●                     │
│              ○        │
├────────────────────────┤
│  Score: 1280  x3콤보  │  ← 상태바 (점수 + 콤보)
└────────────────────────┘
```

### 게임 영역 제한
- 스마트폰 레이아웃에 맞춘 고정 크기 (공정한 게임 환경)
- 타겟 서클이 영역 밖으로 나가지 않도록 패딩 적용

### 결과 화면 통계
- 총점, 클릭 수, 미스 수, 적중률
- 최대 콤보
- Perfect / Great / Good / OK 비율

### 랭킹 화면 (Top 10)
- 순위 + 닉네임 + 점수 + 적중률

## 승리 조건

- 명확한 승리/패배 없음 (솔로 스코어 경쟁)
- 120초 종료 시 게임 완료, 총점으로 랭킹 경쟁

## AI 전략

- 해당 없음 (솔로 플레이 전용, AI 대전 없음)

## 기술 구성

| 파일 | 역할 |
|---|---|
| `src/lib/game-logic/reaction-speed.ts` | 게임 로직 (타겟 스케줄 생성, 점수 계산, 콤보, 등급 판정) |
| `src/components/game/ReactionSpeedBoard.tsx` | 게임 보드 (타이머, 타겟 서클 렌더링/애니메이션, HUD, 상태바) |
| `src/components/game/TargetCircle.tsx` | 개별 타겟 서클 컴포넌트 (축소 원 애니메이션, 클릭 핸들링) |

### DB

| 테이블 | 용도 |
|---|---|
| `leaderboard` (신규) | game_type, player_id, score, accuracy, max_combo, played_at |
| `game_types` | `reaction-speed-game` 행 추가 |

## PvP 지원

| 항목 | 값 |
|---|---|
| 지원 여부 | no (솔로 전용) |
| 추후 확장 | 실시간 동시 플레이 + 점수 비교 모드 가능 |

## 에픽 목록

| ID | 제목 | 상태 |
|---|---|---|
| E-RSG001 | 반응속도 게임 MVP | draft |
